<!DOCTYPE html>
<html>
  <head>
    <title>Mandalorian Geolocation App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="css/geo.css" rel="stylesheet" media="screen">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="../../assets/js/html5shiv.js"></script>
      <script src="../../assets/js/respond.min.js"></script>
    <![endif]-->

    <style>
		html,body {
	        height: 100%;
		}
	
		#map-canvas {
	        height: 50%;
	        padding-right: 15px;
	        padding-left: 15px;
	        margin-right: auto;
	        margin-left: auto;
	        width: 80%;
		}
		
	</style>

  </head>
  <script>
	    var xhReq = new XMLHttpRequest();
	    xhReq.open("GET", "manifest.webapp", false);
	    xhReq.send(null);
	    var serverResponse = JSON.parse(xhReq.responseText);
	    var dhisAPI = serverResponse.activities.dhis.href;
	    //alert(serverResponse.activities.dhis.href);
	</script>
  <body>
  	<!-- Static navbar -->
	<div class="navbar navbar-default navbar-static-top">
	    <div class="container">
	        <div class="navbar-header">
	            <button type="button" class="navbar-toggle" data-toggle="collapse"
	                    data-target=".navbar-collapse">
	                <span class="icon-bar"></span> <span class="icon-bar"></span> <span
	                    class="icon-bar"></span>
	            </button>
	            <a class="navbar-brand" href="/">Mandalorian GeoLoc app</a>
	        </div>
	        <div class="navbar-collapse collapse">
	            <ul class="nav navbar-nav">
	                <li><a href="#/view1">/api/me</a></li>
	                <li><a href="#/view2">System settings</a></li>
	            </ul>
	        </div>
	        <!--/.nav-collapse -->
	    </div>
	</div>

    <h1>Mandalorian Geo</h1>
    <div id="map-canvas" class="container map"></div>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <!-- <script src="//code.jquery.com/jquery.js"></script> -->
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="http://modernizr.com/downloads/modernizr-latest.js"></script>
    <!-- Important to include jquery before bootstrap -->
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
    <script src="js/jquery.js"></script>
    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/geo.js"></script>

    <script>
	$(document).ready(function() {
		initialize_map();		
		// Sierra Leone: ImspTQPwCqd
		// Bo - Badjia - Ngelehun CHC
		// O6uvpzGd5pu;YuQRtpLP10I;DiszpKrYNg8
			
		// Bombali - Bombali Sebora - Pate Bana CHP
		// fdc6uOvgoji;KKkLOTpMXGV;wzvDhS0TkAF
		// TODO: delete: moved to geo.js showEvents()
		/* retrieve_events(dhisAPI + "/api/events.json", "eBAyeGv0exc", "2013-11-01", "2013-12-12", "DiszpKrYNg8"); */
	});
	</script>

	<!-- google map for selection and showin location -->
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    
    <!-- button for user to create new event, should open the form for the users unit with location-->
    <!-- TODO: position better! -->
    <div class="user_input_section">
    	<p>
    	<label for="latitude">Latitude</label>
    	<input type="number" name="latitude" id="latitude" value=0>
    	<label for="longitude">Longitude</label>
    	<input type="number" name="longitude" id="longitude" value=0>
    	<input id="eventbtn" class="btn btn-primary" type="button" value="New Event" onclick="newEvent()">
    	<input id="setLocationbtn" class="btn btn-primary" type="button" value="Set My Location" onclick="setLocation()">
    	</p><p>
    	<script>
    		$(function() { $( "#fromdate" ).datepicker({ dateFormat: "yy-mm-dd" }); });
    		$(function() { $( "#todate" ).datepicker({ dateFormat: "yy-mm-dd" }); });
    	</script>
    	<!-- TODO: placeholder, replace with actual program selection dropdown -->
    	<label for="fromdate">Program: </label>
    	<input type="text" name="program" id="program" value="Cer6nguvEqd">
    	<!-- TODO: placeholder, replace with actual OrgUnti selection dropdown OR choose from user's org unit-->
    	<label for="fromdate">OrgUnit: </label>
    	<input type="text" name="orgunit" id="orgunit" value="DiszpKrYNg8">
    	<label for="fromdate">Period: </label>
    	<input type="text" id="fromdate" />
    	<input type="text" id="todate" />
    	<input id="showeventsbtn" class="btn btn-primary" type="button" value="Show Events" onclick="showEvents()">
    	</p><p>
    	<table id="div-my-table"></table>
    	</p>
	</div>

    

  </body>
</html>


